<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:nxh="http://nuxeo.org/nxweb/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:nxu="http://nuxeo.org/nxweb/util">
  <h:form>
  <div class="action_bar"><script type="text/javascript">
     function openPrintView(defaultTheme)
      {
      baseURL=window.location.href;
      if (baseURL.indexOf("?")==-1){
       baseURL+='?';
      }
      if (baseURL.indexOf("conversationId")==-1){
        baseURL+='currentConversationId='+currentConversationId;
      }
      if(defaultTheme.indexOf("/")!=-1){
       //defaultTheme includes the default page
        defaultTheme=defaultTheme.substr(0, defaultTheme.indexOf("/"));
      }
      window.open(baseURL+'&amp;theme='+ defaultTheme +'/print','_blank')
      }
  </script> 
  <nxu:methodResult name="actions"
    value="#{webActions.getActionsList('DOCUMENT_UPPER_ACTION')}">
    <nxu:dataList layout="simple" var="action" value="#{actions}">
      <nxh:commandLink action="#{action.getLink()}">
        <h:graphicImage value="#{action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" />
      </nxh:commandLink>
    </nxu:dataList>
  </nxu:methodResult>  
  <h:outputLink
    value="javascript:openPrintView('#{WebcontainerThemeActions.defaultTheme}');">
    <h:graphicImage alt="#{messages['label.print']}"
      url="/icons/printer.gif" />
  </h:outputLink></div>
</h:form>
</div>
